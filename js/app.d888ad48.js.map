{"version":3,"file":"js/app.d888ad48.js","mappings":"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","sources":["webpack://companion/./src/App.vue","webpack://companion/./src/components/Location.vue","webpack://companion/./src/components/Location.vue?7a84","webpack://companion/./src/components/Movement.vue","webpack://companion/./src/components/Movement.vue?dda3","webpack://companion/./src/App.vue?7ccd","webpack://companion/./src/main.js","webpack://companion/webpack/bootstrap","webpack://companion/webpack/runtime/chunk loaded","webpack://companion/webpack/runtime/compat get default export","webpack://companion/webpack/runtime/define property getters","webpack://companion/webpack/runtime/global","webpack://companion/webpack/runtime/hasOwnProperty shorthand","webpack://companion/webpack/runtime/jsonp chunk loading","webpack://companion/webpack/startup"],"sourcesContent":["\n<script>\nimport LocationComponent from './components/Location.vue'\nimport DeviceMovement from './components/Movement.vue'\nexport default {\n  name: 'App',\n  components: {\n    LocationComponent,\n    DeviceMovement,\n},\n  data() {\n    return {\n      isMobile: false,\n      ip:'192.168.31.200',\n      port:'8765',\n      wss_url: undefined,\n      socket: undefined,\n      ready: false,\n      timer: null,\n      ip1:'192',\n      ip2:'168',\n      ip3:'31',\n      ip4:'200',\n    }\n  },\n  methods: {\n        // init() {\n        //     let safariWindow = window.open();\n        //     alert(\"由于SSL认证的限制，您现在将在新的页面进行手动许可，在认证完毕后再返回进行链接（该操作仅需在第一次链接时进行）\")\n        //     let https_url = `https://${this.ip}:${this.port}`\n        //     safariWindow.location.href = https_url\n        //     window.open(https_url)\n        // },\n        goto() {\n          window.open(\n            `https://${this.ip1}.${this.ip2}.${this.ip3}.${this.ip4}:${this.port}`,\n            '_blank'\n          )\n          // window.location.href=`https://${this.ip1}.${this.ip2}.${this.ip3}.${this.ip4}:${this.port}`\n        },\n\n        heartbeat() {\n          if (!this.socket) {\n            return\n          }\n          let payload = {\n            type: \"Heartbeat\",\n            timestamp: Date.now(),\n          }\n          this.socket.send(JSON.stringify(payload))\n        },\n        \n        connect() {\n            if (this.socket) {\n              this.socket.close()\n              console.log(\"已关闭上次链接\")\n            }\n            this.wss_url = `wss://${this.ip1}.${this.ip2}.${this.ip3}.${this.ip4}:${this.port}`\n            console.log(`正在连接${this.wss_url}`)\n            try {\n                this.socket = new WebSocket(this.wss_url)\n                this.socket.onerror = (event) => {\n                  console.log(event)\n                  alert(\"连接失败！请检查链接是否输入正确，以及是否已进行了证书认证\")\n                  this.ready = false\n                }\n                this.socket.onopen = (event) => {\n                    console.log(\"WSS连接成功！\")\n                    console.log(event)\n                    this.ready = true;\n                    this.$refs.Movement.setUrl(this.wss_url)\n                    this.$refs.Location.setUrl(this.wss_url)\n                }\n            } catch {\n              alert(\"连接失败，请检查后重试！\")\n                console.log(\"创建失败！\")\n                this.ready = false\n            }\n            },\n        \n    },\n  mounted() {\n    if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){\n  // true for mobile device\n        console.log(\"移动设备\")\n        this.isMobile = true\n    } else {\n      this.isMobile = false\n      console.log(\"桌面设备\")\n      // alert(\"PC或平板设备通常缺失独立的定位和运动传感器模块，为了确保采集数据的精确性，请使用智能手机打开本页面！\")\n    }\n    this.timer = setInterval(() => {\n            this.heartbeat()\n        }, 1000)\n  },\n  beforeUnmount() {\n        clearInterval(this.timer)\n    }\n}\n</script>\n\n<template>\n  <div v-if=\"!ready\">\n        <div class=\"inputs\">\n          <input placeholder=\"{{ip1}}\" v-model=\"ip1\">\n          <input placeholder=\"{{ip2}}\" v-model=\"ip2\">\n          <input placeholder=\"{{ip3}}\" v-model=\"ip3\">\n          <input placeholder=\"{{ip4}}\" v-model=\"ip4\">\n          <!-- <input placeholder=\"{{ip}}\" v-model=\"ip\">\n          <input placeholder=\"{{port}}\" v-model=\"port\"> -->\n        </div>\n        <button class=\"connect\" @click=\"goto()\">🔗证书认证界面</button>\n        <!-- <a :href=\"`https://${this.ip}:${this.port}`\">🔗证书认证界面</a> -->\n      </div>\n      <h4 v-else>{{`✅已成功连接至${socket.url}`}}</h4>\n      <div>\n          <button @click=\"connect\">{{ready?'重连' :'开启链接'}}</button>\n      </div>\n  <LocationComponent :url=\"ready? wss_url : undefined\" ref=\"Location\"/>\n  <!-- <LocationComponent /> -->\n  <DeviceMovement :url=\"ready? wss_url : undefined\" ref=\"Movement\" />\n  <p>第一次使用时，请先在新标签页中打开证书认证界面并手动认证</p>\n  <p>后续只要链接ip相同，就无需重复操作</p>\n</template>\n\n<style>\n#app {\n  font-family: Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 60px;\n}\n\ninput {\n  width: 20%;\n  /* padding: 5px 5px; */\n  margin: 3px 4px;\n  display: inline-block;\n  border: 1px solid #ccc;\n  box-sizing: border-box;\n  border-radius: 10px;\n  background-color: #f2f2f2;\n  padding: 15px 15px;\n  text-align: center;\n}\n\n\nbutton {\n  appearance: button;\n  backface-visibility: hidden;\n  background-color: #405cf5;\n  border-radius: 8px;\n  border-width: 0;\n  box-shadow: rgb(50 50 93 / 10%) 0 0 0 1px inset, rgb(50 50 93 / 10%) 0 2px 5px 0, rgb(0 0 0 / 7%) 0 1px 1px 0;\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-family: -apple-system,system-ui,\"Segoe UI\",Roboto,\"Helvetica Neue\",Ubuntu,sans-serif;\n  font-size: 100%;\n  height: 50px;\n  line-height: 1.15;\n  margin: 12px 0 0;\n  outline: none;\n  overflow: hidden;\n  padding: 0 25px;\n  position: relative;\n  text-align: center;\n  text-transform: none;\n  transform: translateZ(0);\n  transition: all .2s,box-shadow .08s ease-in;\n  user-select: none;\n  -webkit-user-select: none;\n  touch-action: manipulation;\n  width: 50%;\n  max-width:15em;\n}\n\n</style>\n","\r\n<script>\r\n    export default {\r\n        name:\"LocationComponent\",\r\n        props: {\r\n            url: String,\r\n        },\r\n        methods: {\r\n        setUrl(url) {\r\n            console.log(\"设备位置数据传输关闭\")\r\n            if (this.socket) {\r\n                this.socket.close()\r\n            }\r\n            this.socket = new WebSocket(url)\r\n            console.log(\"新的设备位置数据传输已开启\")\r\n        },\r\n        success(pos) {\r\n            this.locationFound = true;\r\n            console.log(\"获取定位数据\")\r\n            this.data = pos\r\n            this.lastTime = new Date(pos.timestamp).toLocaleTimeString();\r\n            const crd = pos.coords;\r\n            this.latitude = crd.latitude;\r\n            this.longitude = crd.longitude;\r\n            this.accuracy = crd.accuracy;\r\n            this.heading = crd.heading;\r\n            this.speed = crd.speed;\r\n            if (this.socket == undefined) {\r\n                return\r\n            }\r\n            let payload = {\r\n                type: \"Geolocation\",\r\n                timestamp: pos.timestamp,\r\n                latitude: pos.coords.latitude,\r\n                longitude: pos.coords.longitude,\r\n                altitude: pos.coords.altitude,\r\n                accuracy: pos.coords.accuracy,\r\n                altitudeAccuracy: pos.coords.altitudeAccuracy,\r\n                heading: pos.coords.heading,\r\n                speed: pos.coords.speed,\r\n            }\r\n            this.socket.send(JSON.stringify(payload))\r\n        },\r\n        error(err) {\r\n            this.locationFound = false;\r\n            console.warn(`ERROR(${err.code}): ${err.message}`);\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            data: undefined,\r\n            socket: undefined,\r\n            latitude: \"\",\r\n            longitude: \"\",\r\n            accuracy:\"\",\r\n            lastTime: \"\",\r\n            heading: \"\",\r\n            speed:\"\",\r\n            locationFound: false,\r\n            options: {\r\n                enableHighAccuracy: true,\r\n                timeout: 5000,\r\n                maximumAge: 0\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        if (\"geolocation\" in navigator) {\r\n            console.log(\"开始定位!\")\r\n            navigator.geolocation.watchPosition(this.success, this.error, this.options)\r\n        }\r\n    },\r\n}\r\n</script>\r\n<template>\r\n    <div v-if=\"locationFound\">\r\n        <h3>🧭设备位置</h3>\r\n        <!-- <p>{{'🌏经度：'+data.coords.latitude}}</p>\r\n        <p>{{'🌏纬度：'+longitude}}</p> -->\r\n        <p>{{'🌏经度：'+latitude}}</p>\r\n        <p>{{'🌏纬度：'+longitude}}</p>\r\n        <p>{{\"⬆️指向：\"+heading}}</p>\r\n        <p>{{\"🚗速度：\"+speed}}</p>\r\n        <p>{{'🔺精确度：'+accuracy+'米'}}</p>\r\n  </div>\r\n  <h1 v-else>找不到位置！</h1>\r\n  <p>{{\"⏱️上一次定位更新时间：\"+lastTime}}</p>\r\n</template>","import { render } from \"./Location.vue?vue&type=template&id=456013a2\"\nimport script from \"./Location.vue?vue&type=script&lang=js\"\nexport * from \"./Location.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JerryJia\\\\companion\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<script>\r\nexport default {\r\n    name:\"DeviceMovement\",\r\n    props: {\r\n        url: String,\r\n    },\r\n    data() {\r\n        return {\r\n            move_data: undefined,\r\n            ori_data: undefined,\r\n            socket: undefined,\r\n        }\r\n\r\n    },\r\n    methods: {\r\n        setUrl(url) {\r\n            console.log(\"设备运动数据传输关闭\")\r\n            if (this.socket) {\r\n              this.socket.close()\r\n            }\r\n            this.socket = new WebSocket(url)\r\n            console.log(\"新的设备运动数据传输已开启\")\r\n        },\r\n\r\n\r\n        handleMotionEvent(event) {\r\n            this.move_data = event;\r\n            if (this.url != null) {\r\n                if (this.socket == undefined) {\r\n                    return\r\n                }\r\n                let payload = {\r\n                    type: \"DeviceMotion\",\r\n                    timestamp: Date.now(),\r\n                    acceleration: {\r\n                        x: event.acceleration.x,\r\n                        y: event.acceleration.y,\r\n                        z: event.acceleration.z,\r\n                    },\r\n                    accelerationIncludingGravity: {\r\n                        x: event.accelerationIncludingGravity.x,\r\n                        y: event.accelerationIncludingGravity.y,\r\n                        z: event.accelerationIncludingGravity.z,\r\n                    },\r\n                    rotationRate: {\r\n                        alpha: event.rotationRate.alpha,\r\n                        beta: event.rotationRate.beta,\r\n                        gamma: event.rotationRate.gamma,\r\n                    }\r\n                }\r\n                this.socket.send(JSON.stringify(payload))\r\n            }\r\n        },\r\n        handleOrientationEvent(event) {\r\n            this.ori_data = event;\r\n            if (this.url != null) {\r\n                if (this.socket == undefined) {\r\n                    this.socket = new WebSocket(this.url)\r\n                }\r\n                let payload = {\r\n                    type: \"DeviceOrientation\",\r\n                    timestamp: Date.now(),\r\n                    alpha: event.alpha,\r\n                    beta: event.beta,\r\n                    gamma: event.gamma,\r\n                }\r\n                this.socket.send(JSON.stringify(payload))\r\n            }\r\n        },\r\n        iphonePermission() {\r\n            DeviceMotionEvent.requestPermission().then(r => {\r\n                if (r=='granted') {\r\n                    window.addEventListener(\"devicemotion\", this.handleMotionEvent)\r\n                } else {\r\n                    alert(\"无法获得设备运动数据！\")\r\n                }\r\n            })\r\n            DeviceOrientationEvent.requestPermission().then(r => {\r\n                if (r=='granted') {\r\n                    window.addEventListener(\"deviceorientation\", this.handleOrientationEvent)\r\n                } else {\r\n                    alert(\"无法获得设备方向数据！\")\r\n                }\r\n            })\r\n        },\r\n        androidPermission() {\r\n            window.addEventListener(\"devicemotion\", this.handleMotionEvent);\r\n            window.addEventListener(\"deviceorientation\", this.handleOrientationEvent);\r\n        },\r\n        grantPermissions() {\r\n            if(/iPhone/i.test(navigator.userAgent)){\r\n                this.iphonePermission()\r\n            } else if (/Android/i.test(navigator.userAgent)) {\r\n                this.androidPermission()\r\n            } else {\r\n                alert(`不支持的的UserAgent: ${navigator.userAgent}`)\r\n            }\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<template>\r\n    <button @click=\"grantPermissions\" v-if=\"!move_data && !ori_data\">开启运动传感器</button>\r\n    <div v-if=\"move_data\">\r\n        <h3>📱设备状态</h3>\r\n        <h4>🔸六轴加速度</h4>\r\n        <p>{{`X:${move_data.acceleration.x.toFixed(2)} Y:${move_data.acceleration.y.toFixed(2)} Z:${move_data.acceleration.z.toFixed(2)}`}}</p>\r\n        <p>{{`Alpha:${move_data.rotationRate.alpha.toFixed(2)} Beta:${move_data.rotationRate.beta.toFixed(2)} Gamma:${move_data.rotationRate.gamma.toFixed(2)}`}}</p>\r\n    </div>\r\n    <div v-if=\"ori_data\">\r\n        <h4>🔃设备旋转角(deg)</h4>\r\n        <p>{{`Alpha:${ori_data.alpha.toFixed(2)} Beta:${ori_data.beta.toFixed(2)} Gamma:${ori_data.gamma.toFixed(2)}`}}</p>\r\n    </div>\r\n</template>","import { render } from \"./Movement.vue?vue&type=template&id=210a86f7\"\nimport script from \"./Movement.vue?vue&type=script&lang=js\"\nexport * from \"./Movement.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\JerryJia\\\\companion\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=2aec216c\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=2aec216c&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\JerryJia\\\\companion\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nconst app = createApp(App);\napp.mount('#app');\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkcompanion\"] = self[\"webpackChunkcompanion\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(2006); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["class","_createElementVNode","$data","_createElementBlock","_hoisted_3","_toDisplayString","url","_hoisted_1","placeholder","$event","onClick","$options","_createVNode","_component_LocationComponent","undefined","ref","_component_DeviceMovement","_hoisted_4","_hoisted_5","_hoisted_2","name","props","String","methods","setUrl","console","log","this","socket","close","WebSocket","success","pos","locationFound","data","lastTime","Date","timestamp","toLocaleTimeString","crd","coords","latitude","longitude","accuracy","heading","speed","payload","type","altitude","altitudeAccuracy","send","JSON","stringify","error","err","warn","code","message","options","enableHighAccuracy","timeout","maximumAge","mounted","navigator","geolocation","watchPosition","__exports__","acceleration","x","toFixed","y","z","rotationRate","alpha","beta","gamma","move_data","ori_data","handleMotionEvent","event","now","accelerationIncludingGravity","handleOrientationEvent","iphonePermission","DeviceMotionEvent","requestPermission","then","r","window","addEventListener","alert","DeviceOrientationEvent","androidPermission","grantPermissions","test","userAgent","components","LocationComponent","DeviceMovement","isMobile","ip","port","wss_url","ready","timer","ip1","ip2","ip3","ip4","goto","open","heartbeat","connect","onerror","onopen","$refs","Movement","Location","setInterval","beforeUnmount","clearInterval","render","app","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","deferred","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","n","getter","__esModule","d","a","definition","o","defineProperty","enumerable","get","g","globalThis","Function","e","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","id","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}